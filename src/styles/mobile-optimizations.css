
/* Mobile-First Optimizations */
@layer utilities {
  /* Enhanced touch targets */
  .touch-target-large {
    min-height: 48px;
    min-width: 48px;
  }
  
  .touch-manipulation {
    touch-action: manipulation;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }

  /* Mobile form improvements */
  .mobile-form-field {
    @apply text-base; /* Prevents zoom on iOS */
    border-radius: 8px;
    padding: 12px 16px;
  }

  /* Mobile typography scale */
  .mobile-heading-xl {
    font-size: clamp(1.875rem, 5vw, 3rem);
    line-height: 1.2;
  }
  
  .mobile-heading-lg {
    font-size: clamp(1.5rem, 4vw, 2.25rem);
    line-height: 1.3;
  }
  
  .mobile-heading-md {
    font-size: clamp(1.25rem, 3vw, 1.75rem);
    line-height: 1.4;
  }

  /* Mobile spacing utilities */
  .mobile-section-padding {
    @apply py-8 sm:py-12 lg:py-16 xl:py-20;
  }
  
  .mobile-container-padding {
    @apply px-4 sm:px-6 lg:px-8 xl:px-12;
  }

  /* Mobile card optimizations */
  .mobile-card {
    @apply rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300;
    padding: clamp(1rem, 4vw, 2rem);
  }

  /* Tablet-specific utilities */
  @media (min-width: 768px) and (max-width: 1024px) {
    .tablet-grid-auto {
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    }
    
    .tablet-text-scale {
      font-size: 1.125rem;
      line-height: 1.6;
    }
    
    .tablet-spacing {
      padding: 1.5rem 2rem;
    }
  }

  /* Mobile navigation enhancements */
  .mobile-nav-item {
    @apply block w-full text-left px-4 py-4 text-base font-medium rounded-xl transition-all duration-200;
    min-height: 48px;
    display: flex;
    align-items: center;
  }

  .mobile-nav-item:hover {
    @apply bg-gray-50;
  }

  .mobile-nav-item.active {
    @apply text-blue-900 bg-blue-50 border-l-4 border-blue-900;
  }

  /* Mobile form step indicators */
  .mobile-step-indicator {
    @apply flex justify-center space-x-2 mb-6;
  }
  
  .mobile-step-dot {
    @apply w-3 h-3 rounded-full bg-gray-300 transition-colors duration-200;
  }
  
  .mobile-step-dot.active {
    @apply bg-blue-600;
  }

  /* Mobile-optimized animations */
  @media (prefers-reduced-motion: no-preference) {
    .mobile-slide-up {
      animation: mobile-slide-up 0.3s ease-out;
    }
    
    @keyframes mobile-slide-up {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  }

  /* Prevent horizontal scroll on mobile */
  .mobile-no-scroll {
    width: 100vw;
    max-width: 100vw;
    overflow-x: hidden;
  }

  /* Mobile-optimized images */
  .mobile-image-responsive {
    @apply w-full h-auto object-cover;
    max-height: 60vh;
  }

  /* Mobile button improvements */
  .mobile-button-primary {
    @apply py-3 px-6 text-base font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-200;
    min-height: 48px;
    touch-action: manipulation;
  }

  .mobile-button-secondary {
    @apply py-3 px-6 text-base font-medium rounded-lg border-2 transition-all duration-200;
    min-height: 48px;
    touch-action: manipulation;
  }

  /* Mobile header optimizations */
  .mobile-header-sticky {
    @apply fixed top-0 w-full z-50 bg-white/95 backdrop-blur-sm border-b border-gray-100 shadow-sm;
  }

  /* Mobile footer improvements */
  .mobile-footer-grid {
    @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8;
  }

  /* Mobile accessibility improvements */
  .mobile-focus-visible:focus-visible {
    @apply outline-2 outline-blue-600 outline-offset-2;
  }

  /* Mobile performance optimizations */
  .mobile-will-change {
    will-change: transform, opacity;
  }

  .mobile-hardware-acceleration {
    transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }
}

/* iOS specific fixes */
@supports (-webkit-touch-callout: none) {
  .ios-input-fix {
    font-size: 16px !important; /* Prevents zoom on focus */
  }
  
  .ios-safe-area {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
}

/* Android specific fixes */
@media screen and (-webkit-min-device-pixel-ratio: 0) {
  .android-input-fix {
    background-color: transparent;
  }
}
